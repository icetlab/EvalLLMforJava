{
  "id": "000fa29",
  "repository": "prestodb/presto",
  "commit_hash": "000fa29dcbf3958e988a20f92febe058baba9e6d",
  "source_code": "presto-main/src/main/java/com/facebook/presto/operator/repartition/OptimizedPartitionedOutputOperator.java",
  "jmh_case": "BenchmarkPartitionedOutputOperator",
  "unittest": "presto-main/src/test/java/com/facebook/presto/operator/repartition/TestOptimizedPartitionedOutputOperator.java",
  "persona": "You are a software performance assistant. Your task is to improve the performance of the source code.",
  "description": "In OptimizedPartitionedOutputOperator, the PagePartioner has partitionCount number of PartitionBuffer, and each PartitionBuffer has a positions array to record the positions to be appended to this buffer. Previously this positions array was initialized to be the incoming page's positionCount size. This could waste lots of memory since each partition may only get a small portion of rows."
}