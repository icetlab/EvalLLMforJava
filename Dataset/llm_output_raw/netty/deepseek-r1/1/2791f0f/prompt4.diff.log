The performance issue is that the static `AtomicLong` used for generating unique task IDs can become a contention point when many delayed tasks are scheduled across different event loops. Since each event loop has its own task queue, we can use a per-queue non-volatile counter instead to avoid contention.

```json
[
  {
    "filepath": "../netty/common/src/main/java/io/netty/util/concurrent/ScheduledFutureTask.java",
    "search": "import java.util.concurrent.atomic.AtomicLong;\n\n@SuppressWarnings(\"ComparableImplementedButEqualsNotOverridden\")\nfinal class ScheduledFutureTask<V> extends PromiseTask<V> implements ScheduledFuture<V>, PriorityQueueNode {\n    private static final AtomicLong nextTaskId = new AtomicLong();\n    private static final long START_TIME = System.nanoTime();",
    "replace": "import java.util.concurrent.atomic.AtomicLong;\n\n@SuppressWarnings(\"ComparableImplementedButEqualsNotOverridden\")\nfinal class ScheduledFutureTask<V> extends PromiseTask<V> implements ScheduledFuture<V>, PriorityQueueNode {\n    private static final long START_TIME = System.nanoTime();"
  },
  {
    "filepath": "../netty/common/src/main/java/io/netty/util/concurrent/ScheduledFutureTask.java",
    "search": "    private final long id = nextTaskId.getAndIncrement();\n    private long deadlineNanos;",
    "replace": "    private final long id;\n    private long deadlineNanos;"
  },
  {
    "filepath": "../netty/common/src/main/java/io/netty/util/concurrent/ScheduledFutureTask.java",
    "search": "    ScheduledFutureTask(\n            AbstractScheduledEventExecutor executor,\n            Runnable runnable, V result, long nanoTime) {\n\n        this(executor, toCallable(runnable, result), nanoTime);\n    }",
    "replace": "    ScheduledFutureTask(\n            AbstractScheduledEventExecutor executor,\n            Runnable runnable, V result, long nanoTime, long id) {\n\n        this(executor, toCallable(runnable, result), nanoTime, id);\n    }"
  },
  {
    "filepath": "../netty/common/src/main/java/io/netty/util/concurrent/ScheduledFutureTask.java",
    "search": "    ScheduledFutureTask(\n            AbstractScheduledEventExecutor executor,\n            Callable<V> callable, long nanoTime, long period) {\n\n        super(executor, callable);\n        if (period == 0) {\n            throw new IllegalArgumentException(\"period: 0 (expected: != 0)\");\n        }\n        deadlineNanos = nanoTime;\n        periodNanos = period;\n    }",
    "replace": "    ScheduledFutureTask(\n            AbstractScheduledEventExecutor executor,\n            Callable<V> callable, long nanoTime, long period, long id) {\n\n        super(executor, callable);\n        if (period == 0) {\n            throw new IllegalArgumentException(\"period: 0 (expected: != 0)\");\n        }\n        deadlineNanos = nanoTime;\n        periodNanos = period;\n        this.id = id;\n    }"
  },
  {
    "filepath": "../netty/common/src/main/java/io/netty/util/concurrent/ScheduledFutureTask.java",
    "search": "    ScheduledFutureTask(\n            AbstractScheduledEventExecutor executor,\n            Callable<V> callable, long nanoTime) {\n\n        super(executor, callable);\n        deadlineNanos = nanoTime;\n        periodNanos = 0;\n    }",
    "replace": "    ScheduledFutureTask(\n            AbstractScheduledEventExecutor executor,\n            Callable<V> callable, long nanoTime, long id) {\n\n        super(executor, callable);\n        deadlineNanos = nanoTime;\n        periodNanos = 0;\n        this.id = id;\n    }"
  },
  {
    "filepath": "../netty/common/src/main/java/io/netty/util/concurrent/AbstractScheduledEventExecutor.java",
    "search": "public abstract class AbstractScheduledEventExecutor extends AbstractEventExecutor {\n    private static final Comparator<ScheduledFutureTask<?>> SCHEDULED_FUTURE_TASK_COMPARATOR =\n            new Comparator<ScheduledFutureTask<?>>() {\n                @Override\n                public int compare(ScheduledFutureTask<?> o1, ScheduledFutureTask<?> o2) {\n                    return o1.compareTo(o2);\n                }\n            };\n\n    PriorityQueue<ScheduledFutureTask<?>> scheduledTaskQueue;",
    "replace": "public abstract class AbstractScheduledEventExecutor extends AbstractEventExecutor {\n    private static final Comparator<ScheduledFutureTask<?>> SCHEDULED_FUTURE_TASK_COMPARATOR =\n            new Comparator<ScheduledFutureTask<?>>() {\n                @Override\n                public int compare(ScheduledFutureTask<?> o1, ScheduledFutureTask<?> o2) {\n                    return o1.compareTo(o2);\n                }\n            };\n\n    private long nextTaskId;\n    PriorityQueue<ScheduledFutureTask<?>> scheduledTaskQueue;"
  },
  {
    "filepath": "../netty/common/src/main/java/io/netty/util/concurrent/AbstractScheduledEventExecutor.java",
    "search": "    @Override\n    public ScheduledFuture<?> schedule(Runnable command, long delay, TimeUnit unit) {\n        ObjectUtil.checkNotNull(command, \"command\");\n        ObjectUtil.checkNotNull(unit, \"unit\");\n        if (delay < 0) {\n            delay = 0;\n        }\n        validateScheduled0(delay, unit);\n\n        return schedule(new ScheduledFutureTask<Void>(\n                this, command, null, ScheduledFutureTask.deadlineNanos(unit.toNanos(delay))));\n    }",
    "replace": "    @Override\n    public ScheduledFuture<?> schedule(Runnable command, long delay, TimeUnit unit) {\n        ObjectUtil.checkNotNull(command, \"command\");\n        ObjectUtil.checkNotNull(unit, \"unit\");\n        if (delay < 0) {\n            delay = 0;\n        }\n        validateScheduled0(delay, unit);\n\n        return schedule(new ScheduledFutureTask<Void>(\n                this, command, null, ScheduledFutureTask.deadlineNanos(unit.toNanos(delay)), nextTaskId++));\n    }"
  },
  {
    "filepath": "../netty/common/src/main/java/io/netty/util/concurrent/AbstractScheduledEventExecutor.java",
    "search": "    @Override\n    public <V> ScheduledFuture<V> schedule(Callable<V> callable, long delay, TimeUnit unit) {\n        ObjectUtil.checkNotNull(callable, \"callable\");\n        ObjectUtil.checkNotNull(unit, \"unit\");\n        if (delay < 0) {\n            delay = 0;\n        }\n        validateScheduled0(delay, unit);\n\n        return schedule(new ScheduledFutureTask<V>(\n                this, callable, ScheduledFutureTask.deadlineNanos(unit.toNanos(delay))));\n    }",
    "replace": "    @Override\n    public <V> ScheduledFuture<V> schedule(Callable<V> callable, long delay, TimeUnit unit) {\n        ObjectUtil.checkNotNull(callable, \"callable\");\n        ObjectUtil.checkNotNull(unit, \"unit\");\n        if (delay < 0) {\n            delay = 0;\n        }\n        validateScheduled0(delay, unit);\n\n        return schedule(new ScheduledFutureTask<V>(\n                this, callable, ScheduledFutureTask.deadlineNanos(unit.toNanos(delay)), nextTaskId++));\n    }"
  },
  {
    "filepath": "../netty/common/src/main/java/io/netty/util/concurrent/AbstractScheduledEventExecutor.java",
    "search": "    @Override\n    public ScheduledFuture<?> scheduleAtFixedRate(Runnable command, long initialDelay, long period, TimeUnit unit) {\n        ObjectUtil.checkNotNull(command, \"command\");\n        ObjectUtil.checkNotNull(unit, \"unit\");\n        if (initialDelay < 0) {\n            throw new IllegalArgumentException(\n                    String.format(\"initialDelay: %d (expected: >= 0)\", initialDelay));\n        }\n        if (period <= 0) {\n            throw new IllegalArgumentException(\n                    String.format(\"period: %d (expected: > 0)\", period));\n        }\n        validateScheduled0(initialDelay, unit);\n        validateScheduled0(period, unit);\n\n        return schedule(new ScheduledFutureTask<Void>(\n                this, Executors.<Void>callable(command, null),\n                ScheduledFutureTask.deadlineNanos(unit.toNanos(initialDelay)), unit.toNanos(period)));\n    }",
    "replace": "    @Override\n    public ScheduledFuture<?> scheduleAtFixedRate(Runnable command, long initialDelay, long period, TimeUnit unit) {\n        ObjectUtil.checkNotNull(command, \"command\");\n        ObjectUtil.checkNotNull(unit, \"unit\");\n        if (initialDelay < 0) {\n            throw new IllegalArgumentException(\n                    String.format(\"initialDelay: %d (expected: >= 0)\", initialDelay));\n        }\n        if (period <= 0) {\n            throw new IllegalArgumentException(\n                    String.format(\"period: %d (expected: > 0)\", period));\n        }\n        validateScheduled0(initialDelay, unit);\n        validateScheduled0(period, unit);\n\n        return schedule(new ScheduledFutureTask<Void>(\n                this, Executors.<Void>callable(command, null),\n                ScheduledFutureTask.deadlineNanos(unit.toNanos(initialDelay)), unit.toNanos(period), nextTaskId++));\n    }"
  },
  {
    "filepath": "../netty/common/src/main/java/io/netty/util/concurrent/AbstractScheduledEventExecutor.java",
    "search": "    @Override\n    public ScheduledFuture<?> scheduleWithFixedDelay(Runnable command, long initialDelay, long delay, TimeUnit unit) {\n        ObjectUtil.checkNotNull(command, \"command\");\n        ObjectUtil.checkNotNull(unit, \"unit\");\n        if (initialDelay < 0) {\n            throw new IllegalArgumentException(\n                    String.format(\"initialDelay: %d (expected: >= 0)\", initialDelay));\n        }\n        if (delay <= 0) {\n            throw new IllegalArgumentException(\n                    String.format(\"delay: %d (expected: > 0)\", delay));\n        }\n\n        validateScheduled0(initialDelay, unit);\n        validateScheduled0(delay, unit);\n\n        return schedule(new ScheduledFutureTask<Void>(\n                this, Executors.<Void>callable(command, null),\n                ScheduledFutureTask.deadlineNanos(unit.toNanos(initialDelay)), -unit.toNanos(delay)));\n    }",
    "replace": "    @Override\n    public ScheduledFuture<?> scheduleWithFixedDelay(Runnable command, long initialDelay, long delay, TimeUnit unit) {\n        ObjectUtil.checkNotNull(command, \"command\");\n        ObjectUtil.checkNotNull(unit, \"unit\");\n        if (initialDelay < 0) {\n            throw new IllegalArgumentException(\n                    String.format(\"initialDelay: %d (expected: >= 0)\", initialDelay));\n        }\n        if (delay <= 0) {\n            throw new IllegalArgumentException(\n                    String.format(\"delay: %d (expected: > 0)\", delay));\n        }\n\n        validateScheduled0(initialDelay, unit);\n        validateScheduled0(delay, unit);\n\n        return schedule(new ScheduledFutureTask<Void>(\n                this, Executors.<Void>callable(command, null),\n                ScheduledFutureTask.deadlineNanos(unit.toNanos(initialDelay)), -unit.toNanos(delay), nextTaskId++));\n    }"
  }
]
```