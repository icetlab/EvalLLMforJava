diff --git a/codec-http/src/main/java/io/netty/handler/codec/http/QueryStringDecoder.java b/codec-http/src/main/java/io/netty/handler/codec/http/QueryStringDecoder.java
index 01b747b3f2..529edc4495 100644
--- a/codec-http/src/main/java/io/netty/handler/codec/http/QueryStringDecoder.java
+++ b/codec-http/src/main/java/io/netty/handler/codec/http/QueryStringDecoder.java
@@ -355,8 +355,8 @@ public class QueryStringDecoder {
 
         // Each encoded byte takes 3 characters (e.g. "%20")
         int decodedCapacity = (toExcluded - firstEscaped) / 3;
-        ByteBuffer byteBuf = ByteBuffer.allocate(decodedCapacity);
-        CharBuffer charBuf = CharBuffer.allocate(decodedCapacity);
+        byte[] bytes = new byte[decodedCapacity];
+        char[] chars = new char[decodedCapacity];
 
         StringBuilder strBuf = new StringBuilder(len);
         strBuf.append(s, from, firstEscaped);
@@ -368,18 +368,18 @@ public class QueryStringDecoder {
                 continue;
             }
 
-            byteBuf.clear();
+            int byteCount = 0;
             do {
                 if (i + 3 > toExcluded) {
                     throw new IllegalArgumentException("unterminated escape sequence at index " + i + " of: " + s);
                 }
-                byteBuf.put(decodeHexByte(s, i + 1));
+                bytes[byteCount++] = decodeHexByte(s, i + 1);
                 i += 3;
             } while (i < toExcluded && s.charAt(i) == '%');
             i--;
 
-            byteBuf.flip();
-            charBuf.clear();
+            ByteBuffer byteBuf = ByteBuffer.wrap(bytes, 0, byteCount);
+            CharBuffer charBuf = CharBuffer.wrap(chars);
             CoderResult result = decoder.reset().decode(byteBuf, charBuf, true);
             try {
                 if (!result.isUnderflow()) {
@@ -392,7 +392,7 @@ public class QueryStringDecoder {
             } catch (CharacterCodingException ex) {
                 throw new IllegalStateException(ex);
             }
-            strBuf.append(charBuf.flip());
+            strBuf.append(chars, 0, charBuf.position());
         }
         return strBuf.toString();
     }
