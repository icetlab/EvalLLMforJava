diff --git a/codec-http2/src/main/java/io/netty/handler/codec/http2/DefaultHttp2HeadersEncoder.java b/codec-http2/src/main/java/io/netty/handler/codec/http2/DefaultHttp2HeadersEncoder.java
index 5e0a9f6cf1..224e77bc2d 100644
--- a/codec-http2/src/main/java/io/netty/handler/codec/http2/DefaultHttp2HeadersEncoder.java
+++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/DefaultHttp2HeadersEncoder.java
@@ -57,18 +57,16 @@ public class DefaultHttp2HeadersEncoder implements Http2HeadersEncoder, Http2Hea
 
     @Override
     public void encodeHeaders(int streamId, Http2Headers headers, ByteBuf buffer) throws Http2Exception {
-        try {
-            // If there was a change in the table size, serialize the output from the hpackEncoder
-            // resulting from that change.
         if (tableSizeChangeOutput.isReadable()) {
             buffer.writeBytes(tableSizeChangeOutput);
             tableSizeChangeOutput.clear();
         }
-
+        try {
             hpackEncoder.encodeHeaders(streamId, buffer, headers, sensitivityDetector);
-        } catch (Http2Exception e) {
-            throw e;
         } catch (Throwable t) {
+            if (t instanceof Http2Exception) {
+                throw (Http2Exception) t;
+            }
             throw connectionError(COMPRESSION_ERROR, t, "Failed encoding headers block: %s", t.getMessage());
         }
     }
