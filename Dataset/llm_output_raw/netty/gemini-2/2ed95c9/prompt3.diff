diff --git a/codec-http2/src/main/java/io/netty/handler/codec/http2/HpackStaticTable.java b/codec-http2/src/main/java/io/netty/handler/codec/http2/HpackStaticTable.java
index 389d8ef150..da281293f2 100644
--- a/codec-http2/src/main/java/io/netty/handler/codec/http2/HpackStaticTable.java
+++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/HpackStaticTable.java
@@ -119,7 +119,23 @@ final class HpackStaticTable {
 
     private static final CharSequenceMap<Integer> STATIC_INDEX_BY_NAME = createMap();
 
-    private static final int MAX_SAME_NAME_FIELD_INDEX = maxSameNameFieldIndex();
+        private static final int[] NAME_END_INDICES = new int[STATIC_TABLE.size() + 1];
+
+    static {
+        if (!STATIC_TABLE.isEmpty()) {
+            int length = STATIC_TABLE.size();
+            NAME_END_INDICES[length] = length;
+            for (int i = length - 1; i > 0; i--) {
+                HpackHeaderField current = getEntry(i);
+                HpackHeaderField next = getEntry(i + 1);
+                if (equalsVariableTime(current.name, next.name)) {
+                    NAME_END_INDICES[i] = NAME_END_INDICES[i + 1];
+                } else {
+                    NAME_END_INDICES[i] = i;
+                }
+            }
+        }
+    }
 
     /**
      * The number of header fields in the static table.
@@ -161,16 +177,11 @@ final class HpackStaticTable {
             return index;
         }
 
-        // Note this assumes all entries for a given header field are sequential.
+        // All entries for a given header field are sequential.
+        int endIndex = NAME_END_INDICES[index];
         index++;
-        while (index <= MAX_SAME_NAME_FIELD_INDEX) {
+        while (index <= endIndex) {
             entry = getEntry(index);
-            if (!equalsVariableTime(name, entry.name)) {
-                // As far as fields with the same name are placed in the table sequentially
-                // and INDEX_BY_NAME returns index of the fist position, - it's safe to
-                // exit immediately.
-                return NOT_FOUND;
-            }
             if (equalsVariableTime(value, entry.value)) {
                 return index;
             }
@@ -196,25 +207,7 @@ final class HpackStaticTable {
         return ret;
     }
 
-    /**
-     * Returns the last position in the array that contains multiple
-     * fields with the same name. Starting from this position, all
-     * names are unique. Similar to {@link #getIndexInsensitive(CharSequence, CharSequence)} method
-     * assumes all entries for a given header field are sequential
-     */
-    private static int maxSameNameFieldIndex() {
-        final int length = STATIC_TABLE.size();
-        HpackHeaderField cursor = getEntry(length);
-        for (int index = length - 1; index > 0; index--) {
-            HpackHeaderField entry = getEntry(index);
-            if (equalsVariableTime(entry.name, cursor.name)) {
-                return index + 1;
-            } else {
-                cursor = entry;
-            }
-        }
-        return length;
-    }
+
 
     // singleton
     private HpackStaticTable() {
