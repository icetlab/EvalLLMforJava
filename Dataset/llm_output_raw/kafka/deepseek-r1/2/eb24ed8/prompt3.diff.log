The main performance improvements in this code focus on optimizing the lookup methods `forId` and `forName`. Currently, `forId` uses a switch statement which, while efficient, can be replaced with an array lookup for constant-time O(1) access. Similarly, `forName` uses a chain of string comparisons which is O(n) and can be improved to O(1) by using a precomputed HashMap. These changes reduce overhead in scenarios where these methods are called frequently, such as during record serialization/deserialization or configuration parsing.

```json
[
  {
    "filepath": "../kafka/clients/src/main/java/org/apache/kafka/common/record/CompressionType.java",
    "search": "import java.lang.invoke.MethodHandle;\nimport java.lang.invoke.MethodHandles;\nimport java.lang.invoke.MethodType;\nimport java.nio.ByteBuffer;\nimport java.util.zip.GZIPInputStream;\nimport java.util.zip.GZIPOutputStream;",
    "replace": "import java.lang.invoke.MethodHandle;\nimport java.lang.invoke.MethodHandles;\nimport java.lang.invoke.MethodType;\nimport java.nio.ByteBuffer;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.zip.GZIPInputStream;\nimport java.util.zip.GZIPOutputStream;"
  },
  {
    "filepath": "../kafka/clients/src/main/java/org/apache/kafka/common/record/CompressionType.java",
    "search": "    public static CompressionType forId(int id) {\n        switch (id) {\n            case 0:\n                return NONE;\n            case 1:\n                return GZIP;\n            case 2:\n                return SNAPPY;\n            case 3:\n                return LZ4;\n            case 4:\n                return ZSTD;\n            default:\n                throw new IllegalArgumentException(\"Unknown compression type id: \" + id);\n        }\n    }",
    "replace": "    private static final CompressionType[] ID_TO_TYPE = new CompressionType[5];\n    static {\n        for (CompressionType type : values()) {\n            ID_TO_TYPE[type.id] = type;\n        }\n    }\n\n    public static CompressionType forId(int id) {\n        if (id < 0 || id >= ID_TO_TYPE.length) {\n            throw new IllegalArgumentException(\"Unknown compression type id: \" + id);\n        }\n        CompressionType type = ID_TO_TYPE[id];\n        if (type == null) {\n            throw new IllegalArgumentException(\"Unknown compression type id: \" + id);\n        }\n        return type;\n    }"
  },
  {
    "filepath": "../kafka/clients/src/main/java/org/apache/kafka/common/record/CompressionType.java",
    "search": "    public static CompressionType forName(String name) {\n        if (NONE.name.equals(name))\n            return NONE;\n        else if (GZIP.name.equals(name))\n            return GZIP;\n        else if (SNAPPY.name.equals(name))\n            return SNAPPY;\n        else if (LZ4.name.equals(name))\n            return LZ4;\n        else if (ZSTD.name.equals(name))\n            return ZSTD;\n        else\n            throw new IllegalArgumentException(\"Unknown compression name: \" + name);\n    }",
    "replace": "    private static final Map<String, CompressionType> NAME_TO_TYPE = new HashMap<>();\n    static {\n        for (CompressionType type : values()) {\n            NAME_TO_TYPE.put(type.name, type);\n        }\n    }\n\n    public static CompressionType forName(String name) {\n        CompressionType type = NAME_TO_TYPE.get(name);\n        if (type == null) {\n            throw new IllegalArgumentException(\"Unknown compression name: \" + name);\n        }\n        return type;\n    }"
  }
]
```