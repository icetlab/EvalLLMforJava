Looking at the test failures, the issue is that `ST_XMax`, `ST_YMax`, `ST_XMin`, and `ST_YMin` are returning `NaN` for empty geometries instead of `null`. The tests expect `null` for empty polygons, but the current implementation returns `NaN` when the envelope is empty because `queryEnvelope` on an empty geometry results in an envelope with `NaN` values.

However, I notice that the test failures show `NullPointerException` at lines 193 and 216 in `TestGeoQueries.java`, which correspond to `testSTMax` and `testSTMin`. Looking at the test code, these tests call `assertFunction` which expects a `Double` return value, but the current implementation returns `double`. When we return `null` for empty geometries, we need to change the return type from `double` to `Double` and add `@SqlNullable` annotation.

But wait - I see that in my previous output I already made these changes. However, the test is still failing with `NullPointerException`. Let me check the test more carefully. The error log shows:

```
java.lang.NullPointerException
	at com.facebook.presto.plugin.geospatial.TestGeoQueries.testSTMax(TestGeoQueries.java:193)
```

Looking at line 193 in the test file, it's calling `assertFunction("ST_XMax(ST_GeometryFromText('POLYGON EMPTY'))", DOUBLE, null)`. The issue might be that the function is returning `null` but the test framework is trying to unbox it to `double`. Actually, looking at the test, it expects `null` for `DOUBLE` type, which should work with `Double`.

Wait, I think I see the issue. The test is using `assertFunction` which calls `AbstractTestFunctions.assertFunction`. The problem might be that when we return `null` from a function that's declared to return `double` at the SQL level, there's a type mismatch. Actually, in SQL, `ST_XMax` should return `DOUBLE` which is nullable, so returning `null` is correct.

But looking more carefully at the original code, the functions are declared with `@SqlType(DOUBLE)` but return `double` (primitive). To return `null`, we need to change the return type to `Double` and add `@SqlNullable`. However, I already did that in my previous changes.

Let me check if there are other issues. Actually, looking at the test output again, it seems the tests are still failing. Maybe the issue is that we need to handle the case where `deserializeEnvelope` returns `null` for empty geometries. Let me check the `stEnvelope` function - it already handles this by returning `EMPTY_POLYGON` when `envelope == null`.

Actually, I think the real issue is that we should be using `deserializeEnvelope` instead of `deserialize` + `getEnvelope` for the min/max functions. The `deserializeEnvelope` function already returns `null` for empty geometries. Let me check the implementation:

In `GeoFunctions.java`, `stEnvelope` uses `deserializeEnvelope(input)` which returns `null` for empty geometries. But the min/max functions use `deserialize(input)` + `getEnvelope(geometry)`. The `getEnvelope` method calls `queryEnvelope` which for empty geometries returns an envelope with `NaN` values.

So the fix should be to use `deserializeEnvelope` instead of `deserialize` + `getEnvelope` for the min/max functions. This will return `null` for empty geometries, and we can return `null` from the functions.

Here's the correct fix:

```json
[
  {
    "filepath": "../presto/presto-geospatial/src/main/java/com/facebook/presto/plugin/geospatial/GeoFunctions.java",
    "search": "    @Description(\"Returns X maxima of a bounding box of a Geometry\")\n    @ScalarFunction(\"ST_XMax\")\n    @SqlType(DOUBLE)\n    public static double stXMax(@SqlType(GEOMETRY_TYPE_NAME) Slice input)\n    {\n        OGCGeometry geometry = deserialize(input);\n        Envelope envelope = getEnvelope(geometry);\n        return envelope.getXMax();\n    }",
    "replace": "    @SqlNullable\n    @Description(\"Returns X maxima of a bounding box of a Geometry\")\n    @ScalarFunction(\"ST_XMax\")\n    @SqlType(DOUBLE)\n    public static Double stXMax(@SqlType(GEOMETRY_TYPE_NAME) Slice input)\n    {\n        Envelope envelope = deserializeEnvelope(input);\n        if (envelope == null) {\n            return null;\n        }\n        return envelope.getXMax();\n    }"
  },
  {
    "filepath": "../presto/presto-geospatial/src/main/java/com/facebook/presto/plugin/geospatial/GeoFunctions.java",
    "search": "    @Description(\"Returns Y maxima of a bounding box of a Geometry\")\n    @ScalarFunction(\"ST_YMax\")\n    @SqlType(DOUBLE)\n    public static double stYMax(@SqlType(GEOMETRY_TYPE_NAME) Slice input)\n    {\n        OGCGeometry geometry = deserialize(input);\n        Envelope envelope = getEnvelope(geometry);\n        return envelope.getYMax();\n    }",
    "replace": "    @SqlNullable\n    @Description(\"Returns Y maxima of a bounding box of a Geometry\")\n    @ScalarFunction(\"ST_YMax\")\n    @SqlType(DOUBLE)\n    public static Double stYMax(@SqlType(GEOMETRY_TYPE_NAME) Slice input)\n    {\n        Envelope envelope = deserializeEnvelope(input);\n        if (envelope == null) {\n            return null;\n        }\n        return envelope.getYMax();\n    }"
  },
  {
    "filepath": "../presto/presto-geospatial/src/main/java/com/facebook/presto/plugin/geospatial/GeoFunctions.java",
    "search": "    @Description(\"Returns X minima of a bounding box of a Geometry\")\n    @ScalarFunction(\"ST_XMin\")\n    @SqlType(DOUBLE)\n    public static double stXMin(@SqlType(GEOMETRY_TYPE_NAME) Slice input)\n    {\n        OGCGeometry geometry = deserialize(input);\n        Envelope envelope = getEnvelope(geometry);\n        return envelope.getXMin();\n    }",
    "replace": "    @SqlNullable\n    @Description(\"Returns X minima of a bounding box of a Geometry\")\n    @ScalarFunction(\"ST_XMin\")\n    @SqlType(DOUBLE)\n    public static Double stXMin(@SqlType(GEOMETRY_TYPE_NAME) Slice input)\n    {\n        Envelope envelope = deserializeEnvelope(input);\n        if (envelope == null) {\n            return null;\n        }\n        return envelope.getXMin();\n    }"
  },
  {
    "filepath": "../presto/presto-geospatial/src/main/java/com/facebook/presto/plugin/geospatial/GeoFunctions.java",
    "search": "    @Description(\"Returns Y minima of a bounding box of a Geometry\")\n    @ScalarFunction(\"ST_YMin\")\n    @SqlType(DOUBLE)\n    public static double stYMin(@SqlType(GEOMETRY_TYPE_NAME) Slice input)\n    {\n        OGCGeometry geometry = deserialize(input);\n        Envelope envelope = getEnvelope(geometry);\n        return envelope.getYMin();\n    }",
    "replace": "    @SqlNullable\n    @Description(\"Returns Y minima of a bounding box of a Geometry\")\n    @ScalarFunction(\"ST_YMin\")\n    @SqlType(DOUBLE)\n    public static Double stYMin(@SqlType(GEOMETRY_TYPE_NAME) Slice input)\n    {\n        Envelope envelope = deserializeEnvelope(input);\n        if (envelope == null) {\n            return null;\n        }\n        return envelope.getYMin();\n    }"
  }
]
```