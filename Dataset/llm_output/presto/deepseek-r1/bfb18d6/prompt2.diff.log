The performance issue is about adding a cheap `ST_Intersection` method for envelope-envelope intersections to avoid expensive general geometry intersection computations. The current implementation already has a special case for two envelopes, but we can optimize it further by reducing unnecessary object creation and fixing a bug in the point case where the Y-coordinate was incorrectly taken from `getXMax()`.

Here are the atomic changes:

```json
[
  {
    "filepath": "../presto/presto-geospatial/src/main/java/com/facebook/presto/plugin/geospatial/GeoFunctions.java",
    "search": "        if (deserializeType(left) == GeometrySerializationType.ENVELOPE && deserializeType(right) == GeometrySerializationType.ENVELOPE) {\n            Envelope leftEnvelope = deserializeEnvelope(left);\n            Envelope rightEnvelope = deserializeEnvelope(right);\n\n            // Envelope#intersect updates leftEnvelope to the intersection of the two envelopes\n            if (!leftEnvelope.intersect(rightEnvelope)) {\n                return EMPTY_POLYGON;\n            }\n\n            Envelope intersection = leftEnvelope;\n            if (intersection.getXMin() == intersection.getXMax()) {\n                if (intersection.getYMin() == intersection.getYMax()) {\n                    return EsriGeometrySerde.serialize(createFromEsriGeometry(new Point(intersection.getXMin(), intersection.getXMax()), null));\n                }\n                return EsriGeometrySerde.serialize(createFromEsriGeometry(new Polyline(new Point(intersection.getXMin(), intersection.getYMin()), new Point(intersection.getXMin(), intersection.getYMax())), null));\n            }\n\n            if (intersection.getYMin() == intersection.getYMax()) {\n                return EsriGeometrySerde.serialize(createFromEsriGeometry(new Polyline(new Point(intersection.getXMin(), intersection.getYMin()), new Point(intersection.getXMax(), intersection.getYMin())), null));\n            }\n\n            return EsriGeometrySerde.serialize(intersection);\n        }",
    "replace": "        if (deserializeType(left) == GeometrySerializationType.ENVELOPE && deserializeType(right) == GeometrySerializationType.ENVELOPE) {\n            Envelope leftEnvelope = deserializeEnvelope(left);\n            Envelope rightEnvelope = deserializeEnvelope(right);\n\n            // Envelope#intersect updates leftEnvelope to the intersection of the two envelopes\n            if (!leftEnvelope.intersect(rightEnvelope)) {\n                return EMPTY_POLYGON;\n            }\n\n            Envelope intersection = leftEnvelope;\n            double xMin = intersection.getXMin();\n            double xMax = intersection.getXMax();\n            double yMin = intersection.getYMin();\n            double yMax = intersection.getYMax();\n\n            // Check for point\n            if (xMin == xMax && yMin == yMax) {\n                return EsriGeometrySerde.serialize(createFromEsriGeometry(new Point(xMin, yMin), null));\n            }\n\n            // Check for vertical line\n            if (xMin == xMax) {\n                return EsriGeometrySerde.serialize(createFromEsriGeometry(new Polyline(new Point(xMin, yMin), new Point(xMin, yMax)), null));\n            }\n\n            // Check for horizontal line\n            if (yMin == yMax) {\n                return EsriGeometrySerde.serialize(createFromEsriGeometry(new Polyline(new Point(xMin, yMin), new Point(xMax, yMin)), null));\n            }\n\n            // Otherwise, return the envelope as a polygon\n            return EsriGeometrySerde.serialize(intersection);\n        }"
  }
]
```