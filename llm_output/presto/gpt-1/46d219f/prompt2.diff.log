Iâ€™ve added fast-path checks to immediately return one of the input maps when the other is empty, avoiding unnecessary allocations and loops.

```json
[
  {
    "filepath": "../presto/presto-main/src/main/java/com/facebook/presto/operator/scalar/MapConcatFunction.java",
    "search": "public static Block mapConcat(\n            @TypeParameter(\"K\") Type keyType,\n            @TypeParameter(\"V\") Type valueType,\n            @SqlType(\"map(K,V)\") Block leftMap,\n            @SqlType(\"map(K,V)\") Block rightMap)\n    {",
    "replace": "public static Block mapConcat(\n            @TypeParameter(\"K\") Type keyType,\n            @TypeParameter(\"V\") Type valueType,\n            @SqlType(\"map(K,V)\") Block leftMap,\n            @SqlType(\"map(K,V)\") Block rightMap)\n    {\n        // fast-path: if one map is empty, return the other directly\n        if (leftMap.getPositionCount() == 0) {\n            return rightMap;\n        }\n        if (rightMap.getPositionCount() == 0) {\n            return leftMap;\n        }"
  }
]
```