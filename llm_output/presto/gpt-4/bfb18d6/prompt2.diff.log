I have added a lightweight check for envelope vs. geometry intersection to short-circuit common cases before falling back to the full (and expensive) OGC intersection, while preserving the existing cheap envelopeâ€“envelope handling.

```json
[
  {
    "filepath": "../presto/presto-geospatial/src/main/java/com/facebook/presto/plugin/geospatial/GeoFunctions.java",
    "search": "        if (deserializeType(left) == GeometrySerializationType.ENVELOPE && deserializeType(right) == GeometrySerializationType.ENVELOPE) {",
    "replace": "        GeometrySerializationType leftType = deserializeType(left);\n        GeometrySerializationType rightType = deserializeType(right);\n        // Cheap case: both envelopes\n        if (leftType == GeometrySerializationType.ENVELOPE && rightType == GeometrySerializationType.ENVELOPE) {"
  },
  {
    "filepath": "../presto/presto-geospatial/src/main/java/com/facebook/presto/plugin/geospatial/GeoFunctions.java",
    "search": "        }\n\n        OGCGeometry leftGeometry = EsriGeometrySerde.deserialize(left);",
    "replace": "        }\n\n        // Cheap case: one envelope and one geometry\n        if (leftType == GeometrySerializationType.ENVELOPE && rightType != GeometrySerializationType.ENVELOPE) {\n            Envelope leftEnv = deserializeEnvelope(left);\n            if (leftEnv.isEmpty()) {\n                return EMPTY_POLYGON;\n            }\n            Envelope rightEnv = deserializeEnvelope(right);\n            if (!leftEnv.intersect(rightEnv)) {\n                return EMPTY_POLYGON;\n            }\n            // envelope fully contains geometry\n            if (leftEnv.getXMin() <= rightEnv.getXMin() && leftEnv.getYMin() <= rightEnv.getYMin()\n                    && leftEnv.getXMax() >= rightEnv.getXMax() && leftEnv.getYMax() >= rightEnv.getYMax()) {\n                return right;\n            }\n        }\n        if (rightType == GeometrySerializationType.ENVELOPE && leftType != GeometrySerializationType.ENVELOPE) {\n            Envelope rightEnv = deserializeEnvelope(right);\n            if (rightEnv.isEmpty()) {\n                return EMPTY_POLYGON;\n            }\n            Envelope leftEnv2 = deserializeEnvelope(left);\n            if (!rightEnv.intersect(leftEnv2)) {\n                return EMPTY_POLYGON;\n            }\n            if (rightEnv.getXMin() <= leftEnv2.getXMin() && rightEnv.getYMin() <= leftEnv2.getYMin()\n                    && rightEnv.getXMax() >= leftEnv2.getXMax() && rightEnv.getYMax() >= leftEnv2.getYMax()) {\n                return left;\n            }\n        }\n\n        OGCGeometry leftGeometry = EsriGeometrySerde.deserialize(left);"
  }
]
```