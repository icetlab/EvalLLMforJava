I’ve added a fast‐path for power-of-two partition counts to replace the expensive modulo operation with a simple bitmask, while preserving the original behavior for other cases.

```json
[
  {
    "filepath": "../presto/presto-main/src/main/java/com/facebook/presto/operator/HashGenerator.java",
    "search": "        long rawHash = hashPosition(position, page);\n\n        // clear the sign bit\n        rawHash &= 0x7fff_ffff_ffff_ffffL;\n\n        int partition = (int) (rawHash % partitionCount);\n\n        checkState(partition >= 0 && partition < partitionCount);\n        return partition;",
    "replace": "        long rawHash = hashPosition(position, page);\n\n        // clear the sign bit\n        rawHash &= 0x7fff_ffff_ffff_ffffL;\n        // fast path for power-of-two partition counts\n        if ((partitionCount & (partitionCount - 1)) == 0) {\n            return (int) rawHash & (partitionCount - 1);\n        }\n\n        int partition = (int) (rawHash % partitionCount);\n        checkState(partition >= 0 && partition < partitionCount);\n        return partition;"
  }
]
```