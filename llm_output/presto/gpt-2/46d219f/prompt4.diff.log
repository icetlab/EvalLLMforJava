Iâ€™ve added early-return checks to avoid doing any work when one of the input maps is empty: if the right map is empty, we just return the left map, and if the left map is empty, we return the right map.

```json
[
  {
    "filepath": "../presto/presto-main/src/main/java/com/facebook/presto/operator/scalar/MapConcatFunction.java",
    "search": "    TypedSet typedSet = new TypedSet(keyType, rightMap.getPositionCount());",
    "replace": "    if (rightMap.getPositionCount() == 0) {\n        return leftMap;\n    }\n    if (leftMap.getPositionCount() == 0) {\n        return rightMap;\n    }\n    TypedSet typedSet = new TypedSet(keyType, rightMap.getPositionCount());"
  }
]
```