Iâ€™ve optimized the per-thread batch queue access to use LIFO order by replacing the costly `pollFirst()` call with `pollLast()`, which avoids unnecessary index wrap-around overhead and improves cache locality.

```json
[
  {
    "filepath": "../netty/common/src/main/java/io/netty/util/Recycler.java",
    "search": "if (batch.isEmpty()) {\n                handles.drain(this, chunkSize);\n            }\n            DefaultHandle<T> handle = batch.pollFirst();",
    "replace": "if (batch.isEmpty()) {\n                handles.drain(this, chunkSize);\n            }\n            DefaultHandle<T> handle = batch.pollLast();"
  }
]
```