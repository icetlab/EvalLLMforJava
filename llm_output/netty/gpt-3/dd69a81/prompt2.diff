diff --git a/codec-http/src/main/java/io/netty/handler/codec/http/HttpRequestEncoder.java b/codec-http/src/main/java/io/netty/handler/codec/http/HttpRequestEncoder.java
index 0db8a4ce34..ce8c77d411 100644
--- a/codec-http/src/main/java/io/netty/handler/codec/http/HttpRequestEncoder.java
+++ b/codec-http/src/main/java/io/netty/handler/codec/http/HttpRequestEncoder.java
@@ -49,21 +49,13 @@ public class HttpRequestEncoder extends HttpObjectEncoder<HttpRequest> {
             int start = uri.indexOf("://");
             if (start != -1 && uri.charAt(0) != SLASH) {
                 int startIndex = start + 3;
-                // Correctly handle query params.
-                // See https://github.com/netty/netty/issues/2732
+                // insert slash if no path after host
                 int index = uri.indexOf(QUESTION_MARK, startIndex);
+                if (uri.length() <= startIndex || uri.charAt(startIndex) != SLASH) {
                     if (index == -1) {
-                    if (uri.lastIndexOf(SLASH) <= startIndex) {
-                        uri += SLASH;
-                    }
+                        uri = uri + SLASH;
                     } else {
-                    if (uri.lastIndexOf(SLASH, index) <= startIndex) {
-                        int len = uri.length();
-                        StringBuilder sb = new StringBuilder(len + 1);
-                        sb.append(uri, 0, index)
-                          .append(SLASH)
-                          .append(uri, index, len);
-                        uri = sb.toString();
+                        uri = uri.substring(0, index) + SLASH + uri.substring(index);
                     }
                 }
             }
